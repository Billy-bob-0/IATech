const eraData = [
    {
        "range": "Prehistoric Era",
        "year": "Before 3000 BCE",
        "detailedFeatures": {
            "Culture": "The Prehistoric Era encompasses the time before written records, characterized by early human societies that relied on hunting, gathering, and the beginnings of agriculture. Cultural norms centered around survival, with strong communal ties and oral traditions for knowledge transmission.",
            "Arts": "Artistic expressions included cave paintings, carvings, and early sculptures, often depicting animals, hunting scenes, and symbolic representations, serving both ritualistic and communicative purposes.",
            "Clothing": "Early humans utilized animal hides and natural materials for clothing, tailored with basic tools to protect against environmental elements, with designs adapted to various climates.",
            "Fun Fact": "The oldest known musical instrument is a 40,000-year-old flute made from bird bones, indicating that prehistoric humans engaged in musical activities.",
            "Weather": "This era experienced significant climatic fluctuations, including glacial and interglacial periods, influencing migration patterns and the development of human societies.",
            "Your Interpretation": "Imagine living in a world where daily survival was paramount, and creativity emerged from basic needs. How would you innovate with limited resources?",
            "Citations": [
                "https://www.britannica.com/event/Stone-Age",
                "https://www.smithsonianmag.com/science-nature/oldest-musical-instrument-found-180952168/"
            ]
        }
    },
    {
        "range": "Classical Era",
        "year": "500 BCE - 500 CE",
        "detailedFeatures": {
            "Culture": "A period marked by the rise and fall of great empires such as Greece and Rome, emphasizing philosophy, politics, and structured social systems, laying the foundation for democracy, civic duty, and cultural achievements.",
            "Arts": "The arts flourished with classical sculpture, architecture (e.g., the Parthenon, Roman Colosseum), and literature from poets and playwrights like Homer and Virgil.",
            "Clothing": "Attire was influenced by status and region; Romans wore togas and tunics, while Greeks donned chitons, primarily made from linen and wool.",
            "Fun Fact": "The first known vending machine was invented in ancient Greece by Hero of Alexandria; it dispensed holy water.",
            "Weather": "Mediterranean climates dominated the core regions of these empires, facilitating stable agricultural practices and trade.",
            "Your Interpretation": "Reflect on how political and cultural innovations from this era continue to influence modern society. What aspects would you preserve or alter if given the chance?",
            "Citations": [
                "https://www.britannica.com/event/Greco-Roman-world",
                "https://www.smithsonianmag.com/history/history-vending-machines-180959939/"
            ]
        }
    },
    {
        "range": "Medieval Era",
        "year": "500 CE - 1500 CE",
        "detailedFeatures": {
            "Culture": "Characterized by feudal systems, the dominance of the Catholic Church in Europe, and the emergence of chivalric codes, with daily life varying greatly between peasants and nobility.",
            "Arts": "Artistic expressions included Gothic architecture, illuminated manuscripts, and religious iconography, with music transitioning from monophonic chants to more complex polyphonic styles.",
            "Clothing": "Clothing indicated social status, with nobility wearing elaborate garments made from silk and velvet, while commoners used simpler wool and linen outfits.",
            "Fun Fact": "Medieval manuscripts often featured doodles by bored scribes, including playful depictions of knights fighting snails.",
            "Weather": "The era experienced the Medieval Warm Period, followed by the cooling of the Little Ice Age towards its end, impacting agriculture and livelihoods.",
            "Your Interpretation": "Consider how the values of loyalty and honor from this era have evolved. Would you change the strict social structures or maintain them?",
            "Citations": [
                "https://www.britannica.com/event/Middle-Ages",
                "https://www.smithsonianmag.com/smart-news/why-were-medieval-knights-always-fighting-snails-180952739/"
            ]
        }
    },
    {
        "range": "Renaissance and Early Modern Era",
        "year": "1500 CE - 1800 CE",
        "detailedFeatures": {
            "Culture": "The Renaissance sparked a revival of classical learning, humanism, and exploration, leading to shifts in scientific, religious, and cultural thought during the Enlightenment.",
            "Arts": "Renaissance art included masterpieces from da Vinci, Michelangelo, and Raphael, known for advancements in perspective, realism, and expression.",
            "Clothing": "Fashion became more elaborate, with ruffled collars, doublets, and gowns made from rich fabrics like silk, reflecting social rank.",
            "Fun Fact": "Leonardo da Vinci sketched designs for various inventions, including an early version of the helicopter.",
            "Weather": "Weather patterns during this era were relatively stable, although Europe faced harsh winters and cooler climates during the latter part, contributing to shifts in agricultural practices.",
            "Your Interpretation": "What would you prioritize if you were part of this era’s intellectual rebirth? How would the rediscovery of ancient texts inspire your thinking?",
            "Citations": [
                "https://www.britannica.com/event/Renaissance",
                "https://www.smithsonianmag.com/innovation/what-leonardo-da-vinci-and-wright-brothers-taught-us-about-innovation-180957355/"
            ]
        }
    },
    {
        "range": "Industrial Revolution Era",
        "year": "1760 CE - 1840 CE",
        "detailedFeatures": {
            "Culture": "The Industrial Revolution transformed societies, leading to urbanization and shifts in family structures, alongside significant political changes, including revolutions and the birth of modern nation-states.",
            "Arts": "Art movements included Romanticism, Realism, and later, Modernism, with literature from authors like Charles Dickens and the emergence of cinema towards the end of the era.",
            "Clothing": "Fashion saw dramatic changes from Victorian corsets to simpler, more functional designs with advancements in textile production allowing for mass-produced clothing.",
            "Fun Fact": "The Eiffel Tower, initially criticized, became a beloved landmark and symbol of progress during this period.",
            "Weather": "This era saw the end of the Little Ice Age, leading to more stable weather patterns, though early industrialization began to show minor environmental impacts, such as urban smog and early signs of climate change.",
            "Your Interpretation": "How would you balance technological advancements with their environmental and social impacts? What innovations would you prioritize?",
            "Citations": [
                "https://www.britannica.com/event/Industrial-Revolution",
                "https://www.history.com/topics/landmarks/eiffel-tower"
            ]
        }
    },
    {
        "range": "Victorian Era",
        "year": "1837 CE - 1901 CE",
        "detailedFeatures": {
            "Culture": "The Victorian Era, named after Queen Victoria’s reign, was marked by strict social norms, rapid industrialization, and an emphasis on morality. Social stratification was pronounced, and scientific advancements flourished alongside a rise in global British influence.",
            "Arts": "The arts included ornate Victorian architecture, Gothic Revival, and literature by authors like Charles Dickens and the Brontë sisters. Photography also emerged, revolutionizing visual documentation.",
            "Clothing": "Fashion featured elaborate dresses with corsets for women and top hats and tailored suits for men. Social class greatly influenced attire, with luxurious fabrics reserved for the wealthy.",
            "Fun Fact": "The Great Exhibition of 1851, held in London’s Crystal Palace, showcased innovations and was considered the first world’s fair.",
            "Weather": "The Victorian Era’s stable climate, following the end of the Little Ice Age, enabled advancements in agriculture and urbanization, despite air pollution from industrial growth.",
            "Your Interpretation": "Reflect on the era's contrasts between progress and social restraint. How would you address the challenges of industrialization and class disparity?",
            "Citations": [
                "https://www.britannica.com/event/Victorian-era",
                "https://www.history.com/topics/19th-century/victorian-era"
            ]
        }
    },
    {
        "range": "Future Era: Near Future",
        "year": "2025 CE - 2100 CE",
        "detailedFeatures": {
            "Culture": "The near future is anticipated to experience further integration of technology into daily life, with advancements in artificial intelligence, biotechnology, and space exploration. Societal structures may evolve to address ethical considerations surrounding technological developments.",
            "Arts": "Artistic expression is expected to increasingly incorporate digital and immersive technologies, such as augmented reality and interactive installations. The line between creator and audience may blur, fostering collaborative and participatory art forms.",
            "Clothing": "Fashion may focus on sustainability and functionality, utilizing smart textiles that adapt to environmental conditions and monitor health metrics. Personalization and customization could become more prevalent, enabled by advancements in manufacturing technologies.",
            "Fun Fact": "Scientists predict that 3D printing will be so advanced that entire structures could be printed on other planets to facilitate colonization.",
            "Weather": "Efforts to combat climate change may lead to the development of geoengineering technologies and a shift towards renewable energy sources. However, the effectiveness and ethical implications of such interventions remain subjects of debate, and their environmental impact is uncertain.",
            "Your Interpretation": "Reflect on the potential ethical dilemmas posed by rapid technological advancements. How might humanity balance progress with sustainability?",
            "Citations": [
                "https://www.forbes.com/sites/forbestechcouncil/2023/02/01/ai-and-the-future-of-humanity/",
                "https://www.space.com/3d-printing-future-colonizing-moon-mars"
            ]
        }
    },
    {
        "range": "Future Era: Distant Future",
        "year": "2100 CE - 3000 CE",
        "detailedFeatures": {
            "Culture": "By this time, humanity may have become a multi-planetary species, with colonies established on the Moon, Mars, and beyond. Space exploration could reveal the potential for extraterrestrial life, sparking philosophical debates about humanity’s place in the universe.",
            "Arts": "Art in this era may blend physical and digital realities, with augmented environments and virtual experiences becoming central to creative expression. The concept of identity might evolve alongside the expansion into new worlds.",
            "Clothing": "Clothing may adapt to diverse planetary environments, with bioengineered materials tailored to extreme conditions. Genetic engineering could allow humans to adapt to different planetary atmospheres and gravities.",
            "Fun Fact": "Humans might engineer themselves for space colonization, including modifications for surviving on other planets, incorporating aspects like radiation resistance and longer lifespans.",
            "Weather": "Technologies for controlling planetary climates could exist, though the long-term ecological impacts of geoengineering may raise questions about sustainability and ethics.",
            "Your Interpretation": "Consider how humanity will face questions about identity, ethics, and environmental stewardship in a future shaped by scientific and technological progress.",
            "Citations": [
                "https://www.nasa.gov/feature/nasa-paves-way-for-astronauts-to-settle-on-moon-mars",
                "https://www.scientificamerican.com/article/the-greatest-experiment-humans-can-try-is-genetic-engineering/"
            ]
        }
    },
    {
        "range": "Future Era: Galactic Expansion",
        "year": "3000 CE and Beyond",
        "detailedFeatures": {
            "Culture": "As humanity ventures into interstellar space, societal structures may evolve to support multi-planetary civilizations. The search for extraterrestrial intelligence (SETI) may yield answers to longstanding questions about the universe’s complexity.",
            "Arts": "The arts may be influenced by exposure to alien cultures and environments, with new forms of artistic expression emerging from cross-species communication and experiences across vast distances.",
            "Clothing": "Clothing could be entirely synthetic, designed for intergalactic travel and survival in diverse environments, made from advanced materials tailored to unknown planetary conditions.",
            "Fun Fact": "Advanced genetic engineering could allow humans to adapt to other planets, or even create synthetic organisms capable of thriving in extreme environments.",
            "Weather": "Humans may master the ability to control weather across multiple planets, yet the long-term ecological consequences of such manipulation remain speculative.",
            "Your Interpretation": "What challenges might arise from spreading humanity across the stars? How could we preserve the essence of humanity in such vast expanses of space?",
            "Citations": [
                "https://www.nasa.gov/topics/moon-to-mars"
            ]
        }
    }
];



let eraIndex = 0;
let shuffledEraData = shuffleEraData([...eraData]);

function shuffleEraData(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
}

function scrollToYear() {
    document.getElementById('year-section').scrollIntoView({ behavior: 'smooth' });
    animateHackerEffect();
}

function animateHackerEffect() {
    const yearElement = document.getElementById('year');
    const eraElement = document.getElementById('era');
    const target = shuffledEraData[eraIndex];
    const targetYear = target.year;
    const digits = targetYear.split('');
    let displayedYear = '';
    let currentIndex = 0;

    function revealCharacter() {
        if (currentIndex < digits.length) {
            const currentChar = digits[currentIndex];
            let charOptions;

            if (currentChar.match(/[A-Z]/)) {
                charOptions = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
            } else if (currentChar.match(/[a-z]/)) {
                charOptions = 'abcdefghijklmnopqrstuvwxyz';
            } else if (currentChar.match(/[0-9]/)) {
                charOptions = '0123456789';
            } else if (currentChar === ' ' || currentChar === '-') {
                displayedYear += currentChar;
                yearElement.innerText = displayedYear;
                currentIndex++;
                revealCharacter();
                return;
            }

            const intervalId = setInterval(() => {
                yearElement.innerText = displayedYear + charOptions[Math.floor(Math.random() * charOptions.length)];
            }, 50);

            setTimeout(() => {
                clearInterval(intervalId);
                displayedYear += currentChar;
                yearElement.innerText = displayedYear;
                currentIndex++;
                revealCharacter();
            }, 250);
        } else {
            eraElement.innerText = target.range;
            // Load the modal content only after year and era are fully displayed
            loadModalContent(eraIndex);
        }
    }
    
    revealCharacter();
}

function incrementEraIndex() {
    eraIndex++;
    if (eraIndex >= shuffledEraData.length) {
        eraIndex = 0;
    }
}

function scrollToModals() {
    document.getElementById('modal-section').scrollIntoView({ behavior: 'smooth' });
    loadModalContent(eraIndex); // Load content based on the current eraIndex
}

function loadModalContent(index) {
    const era = shuffledEraData[index];
    const modalSection = document.getElementById('modal-section');
    modalSection.innerHTML = '';
    
    for (const [key, value] of Object.entries(era.detailedFeatures)) {
        const modalDiv = document.createElement('div');
        
        if (key === 'Citations') {
            modalDiv.className = 'w-full h-fit opacity-70 bg-gray-700 text-gray-400 rounded-lg shadow-lg p-4 mx-auto text-left max-w-md break-words';
            const citations = value.map(citation => `<p class="text-sm text-gray-500 text-left m-0 p-0 break-words"><a href="${citation}" target="_blank" class="hover:underline">${citation}</a></p>`).join('');
            modalDiv.innerHTML = `<div class="text-xl font-bold text-green-400">${key}</div><div class="mt-2">${citations}</div>`;
        } else {
            modalDiv.className = 'w-full bg-gray-800 text-gray-200 rounded-lg shadow-lg p-4 mx-auto text-left max-w-md break-words';
            modalDiv.innerHTML = `<div class="text-xl font-bold text-green-400">${key}</div><p class="m-0 p-0">${value}</p>`;
        }

        modalSection.appendChild(modalDiv);
    }
}

function restart() {
    document.documentElement.scrollTo({ top: 0, behavior: 'smooth' });
    eraIndex = 0; // Reset to start
    shuffledEraData = shuffleEraData([...eraData]); // Re-shuffle only on restart
    loadModalContent(eraIndex); // Load initial content after reset
}
